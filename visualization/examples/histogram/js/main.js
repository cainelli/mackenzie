'use strict';

// Employment to population ratio
var data = [
["DEPUTADOS",339397],
["CÂMARA",316238],
["mil",313280],
["REDAÇÃO",308726],
["FINAL",308334],
["DETAQ",303371],
["Sul",245810],
["PRESIDENTE",192181],
["EUA",186010],
["TV",119612],
["difícil",102105],
["SENHOR",94222],
["civil",75031],
["Art",74180],
["USP",68950],
["MG",62272],
["Cruz",62075],
["fácil",61836],
["MEC",61380],
["PSDB",59897],
["inglês",59294],
["RJ",58341],
["Alguns",58259],
["PMDB",56629],
["Civil",54998],
["ESTADO",53414],
["MS",51392],
["SILVA",49980],
["XIX",49598],
["discutir",49590],
["PFL",49513],
["fins",47727],
["juiz",47704],
["RESUMO",45377],
// ["DISCUSSÃO",44870],
// ["BRASIL",44659],
// ["DAS",44488],
// ["IBGE",42921],
// ["TOTAL",41672],
// ["PIB",41268],
// ["Onibus",40616],
// ["RESULTADOS",40246],
// ["Nós",39820],
// ["XX",39113],
// ["SANTOS",38999],
// ["CARLOS",38997],
// ["REFERÊNCIAS",38851],
// ["This",38848],
// ["INTRODUÇÃO",38599],
// ["JOÃO",37956],
// ["irá",37910],
// ["PERNAMBUCO",37909],
// ["CEP",37713],
// ["PR",37124],
// ["PC",37009],
// ["MUNICÍPIO",36512],
// ["FIGURA",36479],
// ["EDUCAÇÃO",36157],
// ["vírus",35720],
// ["PAULO",35484],
// ["OLIVEIRA",34932],
// ["TABELA",34702],
// ["Está",34502],
// ["DIA",34399],
// ["HIV",34262],
// ["gás",32192],,
// ["diminuir",31538],
// ["FEDERAL",31278],,
// ["PROJETO",30365],
// ["CARVALHO",30293],
// ["REUNIÃO",30224],
// ["DNA",29609],
// ["UNIVERSIDADE",29283],
// ["ORDINÁRIA",28802],
// ["ANTÔNIO",28725],
// ["MAIS",28707],
// ["DF",28666],
// ["AOS",28568],
// ["FERNANDO",28474],
// ["ONU",28232],
// ["Juiz",28199],
// ["Luis",27354],
// ["LEI",27341],
// ["COUTINHO",27293],
// ["CFE",27270],
// ["COSTA",27114],
// ["Aids",27098],
// ["MST",26709],
// ["surgiu",26594],
// ["Às",26543],
// ["SUS",26527],
// ["PB",26413],
// ["MÉTODOS",26090],
// ["COELHO",26088],
// ["ENSINO",26085],
// ["risk",25989],
// ["EXPEDIENTE",25902],
// ["sr",25586],
// ["Sci",25527],
// ["XVIII",25495],
// ["MP",25485],
// ["FMI",25328],
// ["PPB",25249],
// ["UM",25082],
// ["DP",25030],
// ["AUGUSTO",24985],
// ["PA",24949],
// ["such",24912],
// ["FERREIRA",24611],
// ["du",24505],
// ["Sá",24475],
// ["Pág",24452],
// ["trás",24266],
// ["SENHORES",24092],
// ["Cf",23976],
// ["CO",23916],
// ["Al",23916],
// ["Org",23778],
// ["civis",23765],
// ["su",23676],
// ["Aí",23404],
// ["BNDES",23388],
// ["AIDS",23388],
// ["PLENÁRIO",23279],
// ["RIBEIRO",23166],
// ["SOUZA",23019],
// ["An",23012],
// ["CE",22999],
// ["L-",22901],
// ["MA",22833],
// ["AM",22821],
// ["Jr.",22722],
// ["USA",22719],
// ["vi",22706],
// ["high",22566],
// ["BA",22525],
// ["first",22508],
// ["quê",22454],
// ["w",22453],
// ["incluir",22402],
// ["PALAVRA",22357],
// ["FIPS",22325],
// ["Jr",22275],
// ["RIO",22253],
// ["Y.",22239],
// ["quis",22197],
// ["CA",22063],
// ["QUEIROZ",22052],
// ["di",21824],
// ["PEDRO",21742],
// ["PDT",21561],
// ["UMA",21498],
// ["CNPq",21435],
// ["BIBLIOGRÁFICAS",21386],
// ["MARTINS",21343],
// ["Ô",21340],
// ["Fig",21232],
// ["ANEXO",21170],
// ["EDUARDO",20867],
// ["CONCLUSÕES",20792],
// ["ALBERTO",20781],
// ["CR",20756],
// ["tá",20752],
// ["MORAES",20644],
// ["VOTO",20640],
// ["ns",20445],
// ["ç",20437],
// ["Assis",20378],
// ["Disc",20346],
// ["CAMPOS",20195],
// ["má",19886],
// ["SÁ",19831],
// ["SENTIDO",19742],
// ["CURSO",19733],
// ["ALVES",19708],
// ["NÃO",19656],
// ["SOBRE",19616],
// ["CONCLUSÃO",19589],
// ["xx",19545],
// ["ACM",19542],
// ["ruim",19507],
// ["ESTADUAL",19359],
// ["BRASILEIRA",19323],
// ["UFRJ",19313],
// ["DEPUTADA",19250],
// ["MARIA",19247],
// ["UFRGS",19186],
// ["DM",18942],
// ["PF",18926],
// ["SECRETÁRIO",18862],
// ["VIEIRA",18832],
// ["DC",18751],
// ["GRANDE",18738],
// ["NUNES",18708],
// ["Aliás",18683],
// ["IC",18598],
// ["VII",18430],
// ["fiz",18405],
// ["NºS",18403],
// ["MATERIAL",18347],
// ["Smith",18290],
// ["Abril",18248],
// ["LOCAL",18213],
// ["vs",18209],
// ["DIAS",18199],
// ["PTB",18085],
// ["PEREIRA",18079],
// ["th",18023],
// ["Ann",17982],
// ["AC",17963],
// ["COMISSÃO",17921],
// ["LIMA",17827],
// ["PÁG",17800],
// ["ANO",17791],
// ["ANOS",17765],
// ["GP",17710],
// ["PL",17676],
// ["St",17615],
// ["NASCIMENTO",17593],
// ["diminui",17572],
// ["SÉRGIO",17550],
// ["NACIONAL",17480],
// ["CAPÍTULO",17363],
// ["subiu",17257],
// ["CUT",17200],
// ["ABC",17154],
// ["RURAL",17135],
// ["GOVERNADOR",17127],
// ["if",17126],
// ["jun",17097],
// ["µg",17005],
// ["jul",16893],
// ["LEITE",16885],
// ["AUTORIA",16868],
// ["UNESP",16825],
// ["Int",16791],
// ["irmã",16677],
// ["Luz",16552],
// ["págs",16504],
// ["INEP",16461],
// ["JÚNIOR",16451],
// ["PARTICULAR",16307],
// ["Lá",16263],
// ["NOS",16205],
// ["will",16152],
// ["STF",16126],
// ["LUIZ",16086],
// ["kg-",16063],
// ["mi",16049],
// ["RN",15879],
// ["nm",15848],
// ["Arthur",15827],
// ["Bill",15738],
// ["CP",15656],
// ["FC",15629],
// ["RODRIGUES",15566],
// ["UFMG",15559],
// ["CBF",15540],
// ["f.",15533],
// ["ICMS",15332],
// ["MT",15218],
// ["Ú",15210],
// ["Mg",15198],
// ["pós-",15153],
// ["Arch",15123],
// ["ADMINISTRATIVA",15102],
// ["AL",15086],
// ["up",15011],
// ["más",15010],
// ["BR",14941],
// ["REPORTAGEM",14901],
// ["fugir",14864],
// ["µm",14850],
// ["HENRIQUE",14822],
// ["RM",14785],
// ["SEBASTIÃO",14751],
// ["cf",14732],
// ["TEREZINHA",14728],
// ["BR-",14712],
// ["CC",14696],
// ["CH",14645],
// ["MAGALHÃES",14634],
// ["UF",14629],
// ["ANDRÉ",14624],
// ["ii",14606],
// ["Lins",14604],
// ["DGE",14550],
// ["Br",14510],
// ["dirigir",14491],
// ["PSB",14477],
// ["PRIMEIRA",14469],
// ["LISTA",14468],
// ["FINALIZANDO",14448],
// ["QUADRO",14443],
// ["SBT",14416],
// ["MC",14412],
// ["GUILHERME",14400],
// ["Gil",14326],
// ["OMS",14305],
// ["LA",14295],
// ["F-",14272],
// ["subir",14269],
// ["EURICO",14250],
// ["SEGUNDO",14220],
// ["On",14212],
// ["CARNEIRO",14191],
// ["GH",14177],
// ["CAVALCANTI",14177],
// ["cá",14144],
// ["PDF",14078],
// ["PUC",14077],
// ["Dis",14058],
// ["PIMENTEL",14009],
// ["cv",13961],
// ["GERALDO",13961],
// ["RICARDO",13942],
// ["MOURA",13929],
// ["JR",13929],
// ["mmHg",13906],
// ["ORADOR",13856],
// ["CD-ROM",13839],
// ["TR",13829],
// ["Cr",13800],
// ["pó",13766],
// ["public",13765],
// ["GOMES",13764],
// ["his",13747],
// ["ALMEIDA",13684],
// ["SAÚDE",13644],
// ["CASA",13642],
// ["JM",13637],
// ["XVII",13524],
// ["VIII",13499],
// ["UCHÔA",13388],
// ["il",13365],
// ["Hz",13350],
// ["FEITOSA",13277],
// ["DR",13273],
// ["RUFINO",13214],
// ["UNICAMP",13190],
// ["NETO",13165],
// ["FOLHA",13096],
// ["PORTO",13070],
// ["ESTUDOS",13068],
// ["PCR",12988],
// ["IMC",12972],
// ["cristã",12921],
// ["pôr",12911],
// ["ES",12906],
// ["En",12888],
// ["S.A.",12886],
// ["AP",12822],
// ["did",12810],
// ["surgir",12792],
// ["RÉGIS",12717],
// ["URV",12688],
// ["spp",12641],
// ["d.",12632],
// ["CAPES",12602],
// ["APROVADO",12576],
// ["SOCIAL",12572],
// ["JA",12569],
// ["â",12534],
// ["dê",12531],
// ["ÀS",12531],
// ["SM",12476],
// ["RAIMUNDO",12451],
// ["NOME",12448],
// ["Enfim",12446],
// ["Ù",12441],
// ["IZAÍAS",12395],
// ["ê",12395],
// ["OF",12370],
// ["LEITÃO",12369],
// ["Club",12339],
// ["m.",12313],
// ["DOIS",12312],
// ["SRA",12279],
// ["LACERDA",12272],
// ["IES",12272],
// ["CT",12270],
// ["ÒØ",12231],
// ["Diz",12214],
// ["INSS",12212],
// ["XVI",12204],
// ["MEDEIROS",12146],
// ["diminuiu",12087],
// ["ANTONIO",12019],
// ["CV",11978],
// ["AGRADECIMENTOS",11902],
// ["PESQUISA",11894],
// ["LEIA",11892],
// ["REGIÃO",11879],
// ["DJ",11836],
// ["COMO",11822],
// ["n.º",11753],
// ["fun",11742],
// ["SANTANA",11736],
// ["City",11695],
// ["CORRENTE",11689],
// ["í",11682],
// ["PEQUENO",11681],
// ["NS",11675],
// ["qui",11651],
// ["DEPENDÊNCIA",11626],
// ["AA",11608],
// ["RA",11606],
// ["mM",11586],
// ["MIRIAM",11573],
// ["MM",11562],
// ["Ali",11553],
// ["TERESA",11549],
// ["BARRETO",11546],
// ["SUL",11538],
// ["EMBRAPA",11532],
// ["ISALTINO",11523],
// ["Ah",11510],
// ["ESMERALDO",11488],
// ["MANOEL",11465],
// ["PP",11465],
// ["PPS",11464],
// ["ó",11431],
// ["DADOS",11428],
// ["PAS",11403],
// ["SEGUNDA",11385],
// ["sus",11375],
// ["ISO",11373],
// ["UFSC",11373],
// ["PV",11355],
// ["UNIDADE",11341],
// ["GERAL",11327],
// ["Cit",11286],
// ["distinguir",11280],
// ["AR",11277],
// ["All",11254],
// ["LINEAR",11250],
// ["BRASILEIRO",11208],
// ["ONGs",11207],
// ["CONVIDA",11177],
// ["QUAL",11166],
// ["IX",11156],
// ["MIL",11131],
// ["bi",11122],
// ["BAIRRO",11100],
// ["ppm",11057],
// ["ESPECIAL",11032],
// ["GO",11030],
// ["TC",11012],
// ["FONTE",11002],
// ["Eur",10995],
// ["GM",10985],
// ["CPMF",10974],
// ["PROGRAMA",10947],
// ["NELSON",10943],
// ["EA",10941],
// ["EDSON",10920],
// ["LEGISLATIVA",10917],
// ["CIÊNCIAS",10880],
// ["SANTA",10860],
// ["Hill",10828],
// ["Ibid",10790],
// ["tênis",10778],
// ["MARCELO",10760],
// ["LEGISLAÇÃO",10754],
// ["SENHORA",10750],
// ["Cu",10679],
// ["dir",10671],
// ["CABRAL",10656],
// ["FM",10649],
// ["PRESIDÊNCIA",10646],
// ["FIG",10640],
// ["TRABALHO",10634],
// ["PD",10631],
// ["MAVIAEL",10601],
// ["U.",10585],
// ["OBJETIVO",10555],
// ["AG",10545],
// ["CENTRO",10513],
// ["LE",10503],
// ["PMs",10461],
// ["GOVERNO",10458],
// ["King",10434],
// ["IL-",10409],
// ["IR",10409],
// ["Z.",10409],
// ["JUSTIÇA",10403],
// ["CORONEL",10400],
// ["BB",10395],
// ["MACHADO",10390],
// ["TI",10389],
// ["AT",10364],
// ["CM",10353],
// ["IN",10345],
// ["BM",10337],
// ["NATUREZA",10285],
// ["HORAS",10278],
// ["MHz",10275],
// ["DESENVOLVIMENTO",10272],
// ["A-",10271],
// ["SOCIEDADE",10256],
// ["dividir",10252],
// ["virus",10236],
// ["LUCIANO",10223],
// ["REVISTA",10211],
// ["within",10165],
// ["ESCOLA",10142],
// ["CF",10136],
// ["MJ",10131],
// ["MR",10112],
// ["CRISTINA",10111],
// ["vá",10098],
// ["dl",10080],
// ["Suplicy",10056],
// ["MESTRE-DE-CERIMÔNIAS",10039],
// ["UFV",9969],
// ["in-",9960],
// ["HC",9948],
// ["Inglês",9946],
// ["ANÁLISE",9922],
// ["Ruth",9917],
// ["AB",9908],
// ["CRUZ",9835],
// ["GRAU",9826],
// ["Suppl",9792],
// ["PI",9782],
// ["APÓS",9770],
// ["m-",9769],
// ["FEDERAÇÃO",9768],
// ["Arq",9756],
// ["MD",9743],
// ["GC",9715],
// ["NUMERO",9704],
// ["RR",9701],
// ["Kg",9701],
// ["ELINA",9694],
// ["SEEC",9675],
// ["PASTOR",9652],
// ["CAIXA",9644],
// ["AIRINHO",9638],
// ["iii",9632],
// ["RELATÓRIO",9600],
// ["SA",9569],
// ["AND",9558],
// ["MOISÉS",9557],
// ["JANEIRO",9519],
// ["FDN",9498],
// ["PFL-BA",9497],
// ["suprir",9495],
// ["SIM",9484],
// ["IAC",9475],
// ["Bush",9452],
// ["RESPECTIVAMENTE",9448],
// ["CASTRO",9446],
// ["Diniz",9419],
// ["SOLDADO",9408],
// ["Ex",9407],
// ["RC",9382],
// ["CÉSAR",9370],
// ["MTV",9363],
// ["MUNICIPAL",9348],
// ["XXI",9344],
// ["XI",9315],
// ["Ü",9307],
// ["PUBLICAÇÃO",9298],
// ["Rui",9297],
// ["milk",9283],
// ["APELO",9261],
// ["PT-SP",9254],
// ["EP",9253],
// ["JC",9240],
// ["SAS",9225],
// ["REQUERIMENTO",9218],
// ["FUNDAÇÃO",9201],
// ["HOJE",9197],
// ["PODER",9193],
// ["Fui",9184],
// ["Engl",9178],
// ["FRANCISCO",9177],
// ["Ê",9169],
// ["CIRO",9161],
// ["ATO",9152],
// ["COLLINS",9135],
// ["qu",9135],
// ["OU",9107],
// ["BARROS",9095],
// ["OBJETIVOS",9082],
// ["Child",9078],
// ["If",9077],
// ["ME",9065],
// ["CLODOALDO",9054],
// ["Of",9035],
// ["X.",9029],
// ["ÁREA",9023],
// ["FERNANDES",9022],
// ["CLUBE",9003],
// ["PELOS",8998],
// ["OR",8981],
// ["XV",8965],
// ["PS",8949],
// ["FGV",8940],
// ["POLÍCIA",8921],
// ["UnB",8910],
// ["WHO",8902],
// ["must",8899],
// ["CEÇA",8898],
// ["Nutr",8877],
// ["PROJETOS",8867],
// ["distribuir",8867],
// ["UTI",8864],
// ["lê",8863],
// ["SISTEMA",8849],
// ["AV",8837],
// ["RECIFE",8822],
// ["IDH",8821],
// ["ROBERTO",8806],
// ["right",8805],
// ["FGTS",8801],
// ["È",8777],
// ["ÕÙ",8756],
// ["Zn",8750],
// ["fãs",8742],
// ["CARLA",8734],
// ["C-",8725],
// ["SUA",8723],
// ["NBA",8720],
// ["Public",8717],
// ["HP",8713],
// ["CONCEDE",8708],
// ["Ç",8702],
// ["British",8687],
// ["CET",8670],
// ["CONGRESSO",8646],
// ["pr",8640],
// ["UFLA",8630],
// ["Phys",8629],
// ["AD",8570],
// ["ÓÒ",8566],
// ["ST",8565],
// ["MÉTODO",8564],
// ["MINUTOS",8549],
// ["ARAÚJO",8533],
// ["INSTITUTO",8529],
// ["ML",8523],
// ["RECURSOS",8520],
// ["TEIXEIRA",8518],
// ["LAPA",8512],
// ["pós",8502],
// ["E-",8498],
// ["SS",8484],
// ["MANTENEDORA",8475],
// ["IP",8466],
// ["ROCHA",8465],
// ["GL",8463],
// ["ANDRADE",8451],
// ["Di",8425],
// ["VINTE",8423],
// ["chinês",8420],
// ["UFC",8396],
// ["BRINGEL",8391],
// ["findings",8379],
// ["Å",8375],
// ["NAS",8357],
// ["ORDEM",8351],
// ["SEM",8346],
// ["child",8339],
// ["DÉCIMA",8337],
// ["CULTURA",8318],
// ["DOUTORA",8293],
// ["CLEITON",8281],
// ["CONTINUANDO",8280],
// ["XII",8278],
// ["BARBOSA",8237],
// ["Clóvis",8235],
// ["ADMINISTRAÇÃO",8233],
// ["ERIBERTO",8225],
// ["cm-",8209],
// ["PRIMEIRO-SECRETÁRIO",8206],
// ["NADEGI",8203],
// ["SO",8202],
// ["SER",8192],
// ["ASSOCIAÇÃO",8188],
// ["IEEE",8186],
// ["Azul",8184],
// ["LDB",8182],
// ["RH",8181],
// ["Eis",8178],
// ["CL",8177],
// ["JL",8176],
// ["PARECER",8167],
// ["LOPES",8163],
// ["ENDEREÇO",8151],
// ["AGLAILSON",8147],
// ["drug",8144],
// ["LC",8140],
// ["Si",8129],
// ["OH",8112],
// ["ISABEL",8109],
// ["incluiu",8100],
// ["FAX",8093],
// ["PINTO",8078],
// ["Álbuns",8046],
// ["MINISTÉRIO",8044],
// ["MILITAR",8025],
// ["MUNICÍPIOS",8024],
// ["SUBMETIDO",8022],
// ["ELIAS",8009],
// ["CEF",8004],
// ["CDs",7993],
// ["CIDADE",7979],
// ["sur",7978],
// ["GA",7978],
// ["CARDOSO",7973],
// ["BRASÍLIA",7968],
];

var margin = {
  top: 20,
  right: 10,
  bottom: 20,
  left: 10
};
var width = 960 - margin.left - margin.right;
var height = 500 - margin.top - margin.bottom;
var columnPadding = 10;
var columnMargin = 1;

var chart = d3
  .select('svg')
  .append('g')
  .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

var histogram = d3
  .layout
  .histogram()
  .value(function (d) {
    return d[1];
  })(data);

var itemHeight = height / Math.max.apply(null, histogram.map(function (d) {
  return d.length;
}));
var itemWidth = width / histogram.length;

var columns = chart
  .selectAll('g')
  .data(histogram)
  .enter()
  .append('g');

columns.selectAll('text')
  .data(function (d) {
    return d;
  })
  .enter()
  .append('text')
  .attr('y', function (_, i) {
    return itemHeight * (i + 1);
  })
  .attr('textLength', itemWidth - columnPadding)
  .attr('lengthAdjust', 'spacingAndGlyphs')
  .attr('x', columnPadding / 2)
  .text(function (d) {
    return d[0];
  })
  .append('title')
  .text(function (d) {
    return d[1];
  });

columns.each(function (column, i) {
  var columnHeight = column.length * itemHeight;
  d3.select(this)
    .attr('transform', function () {
      return 'translate(' + (itemWidth * i) + ', ' + (height - columnHeight) + ')';
    })
    .insert('rect', 'text')
    .attr('width', itemWidth - (2 * columnMargin))
    .attr('height', columnHeight + (4 * columnMargin))
    .attr('x', columnMargin);
});
